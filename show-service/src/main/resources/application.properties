spring.application.name=show-service
server.port=8086

spring.datasource.url=jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_NAME}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}

# HikariCP Connection Pool - Optimized for high load
spring.datasource.hikari.maximum-pool-size=300
spring.datasource.hikari.minimum-idle=50
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# Tomcat thread pool - Show service handles most traffic
server.tomcat.threads.max=1000
server.tomcat.threads.min-spare=100
server.tomcat.accept-count=5000
server.tomcat.max-connections=20000

spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

eureka.client.service-url.defaultZone=http://discovery-service:8761/eureka/
eureka.client.registry-fetch-interval-seconds=5
eureka.client.initial-instance-info-replication-interval-seconds=5
eureka.instance.lease-renewal-interval-in-seconds=5

spring.redis.host=redis
spring.redis.port=6379

# Feign Client Configuration
spring.cloud.openfeign.circuitbreaker.enabled=true
spring.cloud.openfeign.client.config.default.connectTimeout=5000
spring.cloud.openfeign.client.config.default.readTimeout=5000

# Resilience4j Circuit Breaker Configuration
resilience4j.circuitbreaker.instances.movie-service.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.movie-service.slidingWindowSize=100
resilience4j.circuitbreaker.instances.movie-service.minimumNumberOfCalls=20
resilience4j.circuitbreaker.instances.movie-service.permittedNumberOfCallsInHalfOpenState=10
resilience4j.circuitbreaker.instances.movie-service.automaticTransitionFromOpenToHalfOpenEnabled=true
resilience4j.circuitbreaker.instances.movie-service.waitDurationInOpenState=5s
resilience4j.circuitbreaker.instances.movie-service.failureRateThreshold=50
resilience4j.circuitbreaker.instances.movie-service.eventConsumerBufferSize=10
resilience4j.circuitbreaker.instances.movie-service.slidingWindowType=COUNT_BASED

resilience4j.circuitbreaker.instances.seat-service.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.seat-service.slidingWindowSize=100
resilience4j.circuitbreaker.instances.seat-service.minimumNumberOfCalls=20
resilience4j.circuitbreaker.instances.seat-service.permittedNumberOfCallsInHalfOpenState=10
resilience4j.circuitbreaker.instances.seat-service.automaticTransitionFromOpenToHalfOpenEnabled=true
resilience4j.circuitbreaker.instances.seat-service.waitDurationInOpenState=5s
resilience4j.circuitbreaker.instances.seat-service.failureRateThreshold=50
resilience4j.circuitbreaker.instances.seat-service.eventConsumerBufferSize=10
resilience4j.circuitbreaker.instances.seat-service.slidingWindowType=COUNT_BASED

resilience4j.circuitbreaker.instances.theater-service.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.theater-service.slidingWindowSize=100
resilience4j.circuitbreaker.instances.theater-service.minimumNumberOfCalls=20
resilience4j.circuitbreaker.instances.theater-service.permittedNumberOfCallsInHalfOpenState=10
resilience4j.circuitbreaker.instances.theater-service.automaticTransitionFromOpenToHalfOpenEnabled=true
resilience4j.circuitbreaker.instances.theater-service.waitDurationInOpenState=5s
resilience4j.circuitbreaker.instances.theater-service.failureRateThreshold=50
resilience4j.circuitbreaker.instances.theater-service.eventConsumerBufferSize=10
resilience4j.circuitbreaker.instances.theater-service.slidingWindowType=COUNT_BASED

# Resilience4j Time Limiter Configuration
resilience4j.timelimiter.instances.movie-service.timeoutDuration=5s
resilience4j.timelimiter.instances.seat-service.timeoutDuration=5s
resilience4j.timelimiter.instances.theater-service.timeoutDuration=5s